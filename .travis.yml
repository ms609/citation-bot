sudo: false
dist: trusty
branches:
  except: release

language: php
    
matrix:
  include:
    - stage: test
      php: 7.4snapshot
      before_script:  
        - travis_retry composer self-update
        - composer require mediawiki/oauthclient
      script: phpunit --coverage-clover coverage.xml --bootstrap setup.php tests/phpunit
     
    - php: nightly   # Newer version has SSL in php curl
      before_script:  
        - travis_retry composer self-update
        - composer require mediawiki/oauthclient
      script: phpunit --bootstrap setup.php tests/phpunit

git:
  depth: 3
  
