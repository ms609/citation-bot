sudo: false
dist: trusty
branches:
  except: release

language: php

parameters:
    autoload_directories:
      - %rootDir%
      - %rootDir%/tests/
      - %rootDir%/tests/phpunit/
      - %rootDir%/api_handlers
      - %rootDir%/constants

matrix:
  include:
    - stage: test
      php: 7.3
      before_script:  
        - travis_retry composer self-update
        - composer require mediawiki/oauthclient
        - composer require --dev phpstan/phpstan
      script: vendor/bin/phpstan analyse --level 0 .

git:
  depth: 3
  
