sudo: false
dist: trusty
branches:
  except: release

language: php
    
matrix:
  include:
    - stage: test
      php: 7.3
      before_script:  
        - travis_retry composer self-update
        - composer require mediawiki/oauthclient
        - composer require --dev phpstan/phpstan
        - composer require --dev vimeo/psalm
      script:  vendor/bin/psalm --init . ; vendor/bin/psalm . ;  vendor/bin/phpstan analyse --level max Page.php DOItools.php Comment.php Parameter.php constants.php user_messages.php wikiFunctions.php  apiFunctions.php gadgetapi.php get_linked_pages.php generate_template.php process_page.php category.php Template.php WikipediaBot.php

git:
  depth: 3
  
