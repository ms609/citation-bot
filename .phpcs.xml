<?xml version="1.0"?>
<ruleset>
	<rule ref="./vendor/mediawiki/mediawiki-codesniffer/MediaWiki">
        <!-- Intentionally excluded -->
        <exclude name="Generic.Files.LineLength.TooLong"/>
        <exclude name="Generic.Functions.OpeningFunctionBraceKernighanRitchie.ContentAfterBrace"/>
        <exclude name="Generic.WhiteSpace.DisallowSpaceIndent.SpacesUsed"/>
        <exclude name="MediaWiki.Commenting.FunctionAnnotations.UnrecognizedAnnotation"/>
        <exclude name="MediaWiki.Commenting.FunctionComment.MissingDocumentationPrivate"/>
        <exclude name="MediaWiki.Commenting.FunctionComment.MissingDocumentationProtected"/>
        <exclude name="MediaWiki.Commenting.FunctionComment.MissingDocumentationPublic"/>
        <exclude name="MediaWiki.Commenting.FunctionComment.MissingParamTag"/>
        <exclude name="MediaWiki.Commenting.FunctionComment.MissingReturn"/>
        <exclude name="MediaWiki.Commenting.PropertyAnnotations.UnrecognizedAnnotation"/>
        <exclude name="MediaWiki.Commenting.PropertyDocumentation.MissingDocumentationPrivate"/>
        <exclude name="MediaWiki.Commenting.PropertyDocumentation.MissingDocumentationProtected"/>
        <exclude name="MediaWiki.Commenting.PropertyDocumentation.MissingDocumentationPublic"/>
        <exclude name="MediaWiki.Commenting.PropertyDocumentation.MissingVar"/>
        <exclude name="MediaWiki.NamingConventions.LowerCamelFunctionsName.FunctionName"/>
        <exclude name="MediaWiki.NamingConventions.PrefixedGlobalFunctions.allowedPrefix"/>
        <exclude name="MediaWiki.Usage.SuperGlobalsUsage.SuperGlobals"/>
        <exclude name="MediaWiki.WhiteSpace.SpaceyParenthesis.SingleSpaceAfterOpenParenthesis"/>
        <exclude name="MediaWiki.WhiteSpace.SpaceyParenthesis.SingleSpaceBeforeCloseParenthesis"/>
        <!-- breaks PHPStan to turn this off -->
        <exclude name="MediaWiki.Commenting.FunctionComment.NotPunctuationReturnType"/>
        <!-- To fix -->
        <exclude name="Generic.CodeAnalysis.EmptyPHPStatement.SemicolonWithoutCodeDetected"/>
        <exclude name="Generic.Files.OneObjectStructurePerFile.MultipleFound"/>
        <exclude name="Generic.Formatting.MultipleStatementAlignment.IncorrectWarning"/>
        <exclude name="Generic.Formatting.SpaceAfterCast.TooMuchSpace"/>
        <exclude name="MediaWiki.Commenting.MissingCovers.MissingCovers"/>
        <exclude name="MediaWiki.ControlStructures.AssignmentInControlStructures.AssignmentInControlStructures"/>
        <exclude name="MediaWiki.Files.ClassMatchesFilename.NotMatch"/>
        <exclude name="MediaWiki.PHPUnit.AssertCount.NotUsed"/>
        <exclude name="MediaWiki.Usage.IsNull.IsNull"/>
        <exclude name="MediaWiki.WhiteSpace.SpaceBeforeSingleLineComment.NewLineComment"/>
        <exclude name="MediaWiki.WhiteSpace.SpaceyParenthesis.SpaceBeforeOpeningParenthesis"/>
        <exclude name="Squiz.Classes.ValidClassName.NotCamelCaps"/>
        <exclude name="Squiz.Functions.FunctionDeclarationArgumentSpacing.SpacingAfterOpen"/>
        <exclude name="Squiz.Functions.FunctionDeclarationArgumentSpacing.SpacingBeforeClose"/>
        <exclude name="Squiz.WhiteSpace.FunctionSpacing.After"/>
        <exclude name="Squiz.WhiteSpace.OperatorSpacing.SpacingAfter"/>
    </rule>
    <file>./src</file>
    <file>./tests</file>
	<arg name="bootstrap" value="./vendor/mediawiki/mediawiki-codesniffer/utils/bootstrap-ci.php"/>
	<arg name="extensions" value="php"/>
	<arg name="encoding" value="UTF-8"/>
    <rule ref="Generic.ControlStructures.InlineControlStructure.NotAllowed"/>
    <rule ref="Generic.WhiteSpace.DisallowTabIndent"/>
    <rule ref="PSR2.ControlStructures.SwitchDeclaration.BreakIndent"/>
    <!-- Forbidden functions, for security and UTF-8 reasons -->
    <rule ref="Generic.PHP.ForbiddenFunctions">
        <properties>
            <property name="forbiddenFunctions" type="array">
                <element key="assert" value="null"/>
                <element key="create_function" value="null"/>
                <element key="die" value="exit"/>
                <element key="eval" value="null"/>
                <element key="exec" value="null"/>
                <element key="ltrim" value="mb_ltrim"/>
                <element key="passthru" value="null"/>
                <element key="popen" value="null"/>
                <element key="print" value="echo"/>
                <element key="proc_open" value="null"/>
                <element key="rtrim" value="mb_rtrim"/>
                <element key="shell_exec" value="null"/>
                <element key="str_pad" value="mb_str_pad"/>
                <element key="str_split" value="mb_str_split"/>
                <element key="strcut" value="mb_strcut"/>
                <element key="stripos" value="mb_stripos"/>
                <element key="strlen" value="mb_strlen"/>
                <element key="strpos" value="mb_strpos"/>
                <element key="strrev" value="mb_strrev"/>
                <element key="strrpos" value="mb_strrpos"/>
                <element key="strstr" value="mb_strstr"/>
                <element key="strtok" value="null"/>
                <element key="strtolower" value="mb_strtolower"/>
                <element key="strtoupper" value="mb_strtoupper"/>
                <element key="substr_count" value="mb_substr_count"/>
                <element key="substr_replace" value="mb_substr_replace"/>
                <element key="substr" value="mb_substr"/>
                <element key="system" value="null"/>
                <element key="trim" value="mb_trim"/>
                <element key="ucfirst" value="mb_ucfirst"/>
                <element key="ucwords" value="mb_ucwords"/>
            </property>
        </properties>
    </rule>
</ruleset>
