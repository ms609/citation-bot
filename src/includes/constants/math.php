<?php

declare(strict_types=1);

/**
 * Complex MathML elements (<mfrac>, <msup>, <msub>, <msubsup>, <mmultiscripts>, <mroot>, <munder>, <munderover>) are handled by convert_mathml_to_latex() function in MathTools.php.
 *
 * @todo Consider adding support for <mtable>, <mtr>, <mtd> (table/matrix elements, less common in titles)
 */
const MML_TAGS = [
    // Basic MathML Elements
    '<mi>' => '',
    '</mi>' => '',
    '<mn>' => '',
    '</mn>' => '',
    '<mo>' => '',
    '</mo>' => '',
    '<mtext>' => '\text{',
    '</mtext>' => '}',
    '<msqrt>' => '\sqrt{',
    '</msqrt>' => '}',
    '<mfenced>' => '\left(',
    '</mfenced>' => '\right)',
    '<mspace/>' => '\,',
    '<mspace />' => '\,',

    // Basic Math Operators=
    '&dot;' => '\cdot',
    '&middot;' => '\cdot',
    '&times;' => '\times',
    '&minus;' => '-',
    '&frasl;' => '/',
    '&ratio;' => ':',
    '&equals;' => '\Relbar',
    '&lt;' => '<',
    '&gt;' => '>',
    '&InvisibleTimes;' => '',
    '&dd;' => 'd',

    // Arrows
    '&harr;' => '\leftrightarrow',
    '&larr;' => '\leftarrow',
    '&rarr;' => '\rightarrow',
    '&hArr;' => '\Leftrightarrow',
    '&lArr;' => '\Leftarrow',
    '&rArr;' => '\Rightarrow',

    // Greek Alphabet
    '&alpha;' => '\alpha',
    '&beta;' => '\beta',
    '&gamma;' => '\gamma',
    '&delta;' => '\delta',
    '&epsi;' => '\epsilon',
    '&eta;' => '\eta',
    '&iota;' => '\iota',
    '&kappa;' => '\kappa',
    '&lambda;' => '\lambda',
    '&mu;' => '\mu',
    '&mgr;' => '\mu',
    '&nu;' => '\nu',
    '&omicron;' => 'o',
    '&pi;' => '\pi',
    '&theta;' => '\theta',
    '&rho;' => '\rho',
    '&rgr;' => '\rho',
    '&sigma;' => '\sigma',
    '&tau;' => '\tau',
    '&upsilon;' => '\upsilon',
    '&phiv;' => '\phi',
    '&phi;' => '\varphi',
    '&chi;' => '\chi',
    '&piv;' => '\varpi',
    '&pgr;' => '\pi',
    '&ohgr;' => '\omega',
    '&omega;' => '\omega',
    '&xi;' => '\xi',
    '&psi;' => '\psi',
    '&zeta;' => '\zeta',
    '&Delta;' => '\Delta',
    '&Phi;' => '\Phi',
    '&Gamma;' => '\Gamma',
    '&Lambda;' => '\Lambda',
    '&Pi;' => '\Pi',
    '&tgr;' => '\tau',
    '&Theta;' => '\Theta',
    '&Sigma;' => '\Sigma',
    '&Upsilon;' => '\Upsilon',
    '&sigmaf;' => '\varsigma',
    '&Omega;' => '\Omega',
    '&Xi;' => '\Xi',
    '&Psi;' => '\Psi',
    '&epsiv;' => '\epsilon',
    '&phgr;' => '\phi',
    '&ggr;' => '\gamma',
    '&eegr;' => '\eta',
    '&igr;' => '\iota',
    '&kgr;' => '\kappa',
    '&lgr;' => '\lambda',
    '&ngr;' => '\nu',
    '&ogr;' => 'o',
    '&thgr;' => '\theta',
    '&sgr;' => '\sigma',
    '&ugr;' => '\upsilon',
    '&zgr;' => '\zeta',
    '&Agr;' => 'A',
    '&Bgr;' => 'B',
    '&KHgr;' => 'X',
    '&Egr;' => 'E',
    '&PHgr;' => '\Phi',
    '&Ggr;' => '\Gamma',
    '&EEgr;' => 'H',
    '&Igr;' => 'I',
    '&THgr;' => '\Theta',
    '&Kgr;' => 'K',
    '&Lgr;' => '\Lambda',
    '&Mgr;' => 'M',
    '&Ngr;' => 'N',
    '&Ogr;' => 'O',
    '&Pgr;' => '\Pi',
    '&Rgr;' => 'P',
    '&Sgr;' => '\Sigma',
    '&Tgr;' => 'T',
    '&Ugr;' => '\Upsilon',
    '&OHgr;' => '\Omega',
    '&Zgr;' => 'Z',

    // Mathematical Symbols and Operators
    '&perp;' => '\bot',
    '&prime;' => '\prime',
    '&infin;' => '\infty',
    '&clubs;' => '\clubsuit',
    '&diams;' => '\diamondsuit',
    '&hearts;' => '\heartsuit',
    '&spades;' => '\spadesuit',
    '&PlusMinus;' => '\pm',
    '&Prime;' => '\prime\prime',
    '&bull;' => '\bullet',
    '&ne;' => '\neq',
    '&equiv;' => '\equiv',
    '&asymp;' => '\approx',
    '&hellip;' => '...',
    '&VerticalBar;' => '\mid',
    '&crarr;' => '\P',
    '&alefsym;' => '\aleph',
    '&image;' => '\Im',
    '&real;' => '\Re',
    '&weierp;' => '\wp',
    '&otimes;' => '\otimes',
    '&oplus;' => '\oplus',
    '&empty;' => '\emtyset',
    '&cap;' => '\cap',
    '&cup;' => '\cup',
    '&sup;' => '\supset',
    '&nsub;' => '\not\subset',
    '&sub;' => '\subset',
    '&ang;' => '\angle',
    '&nabla;' => '\nabla',
    '&radic;' => '\surd',
    '&and;' => '\wedge',
    '&or;' => '\vee',
    '&angle;' => '\angle',
    '&ap;' => '\approx',
    '&approx;' => '\approx',
    '&bigoplus;' => '\oplus',
    '&bigotimes;' => '\otimes',
    '&bot;' => '\bot',
    '&bottom;' => '\bot',
    '&CirclePlus;' => '\oplus',
    '&CircleTimes;' => '\otimes',
    '&cong;' => '\cong',
    '&Congruent;' => '\equiv',
    '&darr;' => '\downarrow',
    '&dArr;' => '\Downarrow',
    '&Del;' => '\nabla',
    '&DoubleDownArrow;' => '\Downarrow',
    '&DoubleLeftArrow;' => '\Leftarrow',
    '&DoubleLeftRightArrow;' => '\Leftrightarrow',
    '&DoubleRightArrow;' => '\Rightarrow',
    '&DoubleUpArrow;' => '\Uparrow',
    '&downarrow;' => '\downarrow',
    '&Downarrow;' => '\Downarrow',
    '&DownArrow;' => '\Downarrow',
    '&Element;' => '\in',
    '&emptyv;' => '\oslash',
    '&exist;' => '\exists',
    '&Exist;' => '\exists',
    '&forall;' => '\forall',
    '&ForAll;' => '\forall',
    '&ge;' => '\geq',
    '&geq;' => '\geq',
    '&GreaterEqual;' => '\geq',
    '&iff;' => '\Leftrightarrow',
    '&Implies;' => '\Rightarrow',
    '&in;' => '\in',
    '&int;' => '\int',
    '&Integral;' => '\int',
    '&isin;' => '\in',
    '&isinv;' => '\in',
    '&diam;' => '\diamond',
    '&diamond;' => '\diamond',
    '&lang;' => '\left\langle',
    '&langle;' => '\left\langle',
    '&le;' => '\leq',
    '&LeftAngleBracket;' => '\left\langle',
    '&Leftarrow;' => '\Leftarrow',
    '&LeftArrow;' => '\leftarrow',
    '&leftrightarrow;' => '\leftrightarrow',
    '&Leftrightarrow;' => '\Leftrightarrow',
    '&LeftRightArrow;' => '\leftrightarrow',
    '&leq;' => '\leq',
    '&lowast;' => '\ast',
    '&NotElement;' => '\notin',
    '&NotEqual;' => '\notin',
    '&notin;' => '\notin',
    '&part;' => '\partial',
    '&partialD;' => '\partial',
    '&prod;' => '\Pi',
    '&Product;' => '\Pi',
    '&rang;' => '\right\rangle',
    '&rangle;' => '\right\rangle',
    '&RightAngleBracket;' => '\right\rangle',
    '&rightarrow;' => '\rightarrow',
    '&Rightarrow;' => '\Rightarrow',
    '&RightArrow;' => '\rightarrow',
    '&sdot;' => '\cdot',
    '&sim;' => '\sim',
    '&prop;' => '\propto',
    '&Proportional;' => '\propto',
    '&propto;' => '\propto',
    '&sube;' => '\subseteq',
    '&subE;' => '\subseteq',
    '&subset;' => '\subset',
    '&subseteq;' => '\subseteq',
    '&subseteqq;' => '\subseteq',
    '&SubsetEqual;' => '\subseteq',
    '&sum;' => '\Sigma',
    '&Sum;' => '\Sigma',
    '&supe;' => '\supseteq',
    '&supE;' => '\supseteq',
    '&Superset;' => '\supset',
    '&SupersetEqual;' => '\supseteq',
    '&supset;' => '\supset',
    '&supseteq;' => '\supseteq',
    '&supseteqq;' => '\supseteq',
    '&Tilde;' => '\sim',
    '&TildeFullEqual;' => '\cong',
    '&TildeTilde;' => '\approx',
    '&uarr;' => '\uparrow',
    '&uArr;' => '\Uparrow',
    '&uparrow;' => '\uparrow',
    '&Uparrow;' => '\Uparrow',
    '&UpArrow;' => '\uparrow',
    '&UpTee;' => '\bot',
    '&varnothing;' => '\oslash',
    '&varpropto;' => '\propto',
    '&vee;' => '\vee',
    '&vprop;' => '\propto',
    '&wedge;' => '\wedge',
    '&xoplus;' => '\oplus',
    '&xotime;' => '\otimes',
    '&Space;' => '',
    '&colon;' => ':',
    '&ApplyFunction;' => '',
    '&squ;' => '',
];

/** UNICODE_MATH_MAP maps Unicode mathematical and Greek symbols to LaTeX. This mapping is used to convert Unicode math/Greek symbols to LaTeX equivalents. It should ONLY be applied as part of the MathML-to-LaTeX conversion process. DO NOT apply globally or to non-math fields in citations or page text. This is not an exhaustive list; expand as needed. */
const UNICODE_MATH_MAP = [
    // Lowercase Greek letters
    'α' => '\\alpha',
    'β' => '\\beta',
    'γ' => '\\gamma',
    'δ' => '\\delta',
    'ε' => '\\epsilon',
    'ζ' => '\\zeta',
    'η' => '\\eta',
    'θ' => '\\theta',
    'ι' => '\\iota',
    'κ' => '\\kappa',
    'λ' => '\\lambda',
    'μ' => '\\mu',
    'ν' => '\\nu',
    'ξ' => '\\xi',
    'ο' => 'o',
    'π' => '\\pi',
    'ρ' => '\\rho',
    'σ' => '\\sigma',
    'τ' => '\\tau',
    'υ' => '\\upsilon',
    'φ' => '\\phi',
    'χ' => '\\chi',
    'ψ' => '\\psi',
    'ω' => '\\omega',

    // Uppercase Greek letters
    'Α' => 'A',
    'Β' => 'B',
    'Γ' => '\\Gamma',
    'Δ' => '\\Delta',
    'Ε' => 'E',
    'Ζ' => 'Z',
    'Η' => 'H',
    'Θ' => '\\Theta',
    'Ι' => 'I',
    'Κ' => 'K',
    'Λ' => '\\Lambda',
    'Μ' => 'M',
    'Ν' => 'N',
    'Ξ' => '\\Xi',
    'Ο' => 'O',
    'Π' => '\\Pi',
    'Ρ' => 'P',
    'Σ' => '\\Sigma',
    'Τ' => 'T',
    'Υ' => '\\Upsilon',
    'Φ' => '\\Phi',
    'Χ' => 'X',
    'Ψ' => '\\Psi',
    'Ω' => '\\Omega',

    // Blackboard bold number sets
    'ℤ' => '\\mathbb{Z}',
    'ℕ' => '\\mathbb{N}',
    'ℚ' => '\\mathbb{Q}',
    'ℝ' => '\\mathbb{R}',
    'ℂ' => '\\mathbb{C}',

    // Operators and symbols
    '−' => '-', // U+2212 minus
    '×' => '\\times',
    '∙' => '\\cdot',
    '•' => '\\bullet',
    '÷' => '\\div',
    '±' => '\\pm',
    '∓' => '\\mp',
    '∗' => '\\ast',
    '∣' => '\\mid',
    '∧' => '\\wedge',
    '∨' => '\\vee',
    '∩' => '\\cap',
    '∪' => '\\cup',
    '∖' => '\\setminus',
    '⊂' => '\\subset',
    '⊃' => '\\supset',
    '⊆' => '\\subseteq',
    '⊇' => '\\supseteq',
    '∈' => '\\in',
    '∉' => '\\notin',
    '∅' => '\\emptyset',
    '∞' => '\\infty',
    '∇' => '\\nabla',
    '∑' => '\\sum',
    '∏' => '\\prod',
    '∫' => '\\int',
    '∮' => '\\oint',

    // Relations
    '≠' => '\\neq',
    '≈' => '\\approx',
    '≅' => '\\cong',
    '≡' => '\\equiv',
    '≤' => '\\leq',
    '≥' => '\\geq',
    '≪' => '\\ll',
    '≫' => '\\gg',
    '∝' => '\\propto',
    '∼' => '\\sim',

    // Arrows
    '←' => '\\leftarrow',
    '→' => '\\rightarrow',
    '↔' => '\\leftrightarrow',
    '⇒' => '\\Rightarrow',
    '⇐' => '\\Leftarrow',
    '⇔' => '\\Leftrightarrow',
    '↑' => '\\uparrow',
    '↓' => '\\downarrow',

    // Others
    '°' => '^\\circ',
    '′' => '\\prime',
    '″' => '\\prime\\prime',
    '∂' => '\\partial',
    '∃' => '\\exists',
    '∀' => '\\forall',
    '⊥' => '\\perp',
    '√' => '\\sqrt{}',
    'ℓ' => '\\ell',
];
